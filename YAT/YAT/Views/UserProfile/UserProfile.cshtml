@model DataLayer.User
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@{
    ViewBag.Title = "User Profile";
}

@using Microsoft.AspNet.Identity;
@using Microsoft.AspNet.Identity.EntityFramework;
@using YAT.Models;
@using DataLayer;

<h2>User Profile</h2>
<!DOCTYPE html>
<html>
<head>
    <title>User Profile</title>
    <style type="text/css">
        #map-canvas {
            width: 500px;
            height: 400px;
            margin: 0 auto 0 auto;
        }
    </style>

    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js"></script>
    <script type="text/javascript">
        var map;
        var geocoder;

        function initialize() {
            geocoder = new google.maps.Geocoder();
            var latlng = new google.maps.LatLng(-34.397, 150.644);
            var mapOptions = {
                zoom: 0,
                center: latlng
            }
            map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
        }

    function codeAddress()
    {
        var address = document.getElementById('address').value;
        geocoder.geocode({ 'address': address }, function (results, status)
        {
            if (status == google.maps.GeocoderStatus.OK)
            {
                var mapOptions = {
                    zoom: 15,
                    center: results[0].geometry.location,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                }
                map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);
                map.setCenter(results[0].geometry.location);
                var marker = new google.maps.Marker
                ({
                    map: map,
                    position: results[0].geometry.location
                });
            }
            else
            {
                alert("Geocode was not successful for the following reason: " + status);
            }
        });
    }
    google.maps.event.addDomListener(window, 'load', initialize);

    </script>
</head>
<body>
    <form method="post">
        <div class="text-center">
            <fieldset>
                @{
                    if (Request.IsAuthenticated)
                    {
                        var currentUser = (Model as DataLayer.User);
                        <legend>  This Page Contains The Details Of The User </legend>
                        <div>
                            @if(@currentUser.Gender.Equals(true))
                            {
                            <img src="~/Pics/male.jpg"> <br /> <br />
                            }
                            else
                            {
                            <img src="~/Pics/female.jpg"> <br /> <br />
                            }
                        </div>
                         <div>
                        <label for="FirstName">First Name:</label>
                         @currentUser.FirstName <br /> <br />
                        </div>
                         <div>
                         <label for="LastName">Last Name:</label>
                          @currentUser.LastName <br /> <br />
                            </div>
                            <div>
                             <label for="Age">Age:</label>
                             @currentUser.Age <br /> <br />
                        </div>
                        <div>
                         <label for="Gender">Gender:</label>
                         @(currentUser.Gender ? "Male" : "Female") <br /> <br />
                        </div>
                         <div>
                        <label for="InterestedIn">Interested In:</label>
                        @(currentUser.InterestedIn ? "Male" : "Female") <br /> <br />
                         </div>
                         <div>
                        <label for="RegistrationDate">Registration Date:</label>
                          @currentUser.RegistrationDate.ToShortDateString() <br /> <br />
                        </div>
                        <div>
                            @using (Html.BeginForm("SendMessage", "UserProfile", FormMethod.Post))
                            {
                                <input type="text" id="text" name="text"/>
                                <input type="hidden" id="hidden" name="hidden" value=@Model.Id>
                                <input type="submit" value="Message" class="btn btn-default" />
                            }
                            <label>&nbsp;</label>
                            <br /> <br />
                        </div>
                        <div>
                        <label>&nbsp;</label>
                        <input type="submit" value="Block" class="submit" /> <br /> <br />
                        </div>
                        <div>
                        <label>&nbsp;</label>
                        <input type="submit" value="Hide" class="submit" /> <br /> <br />
                        </div>
                        <div>
                        <h2> Like Section </h2> <br /> <br />
                         <input id="address" type="text" value="@currentUser.Address" readonly>
                         <input type="button" value="Get Location On Google Map" onclick="codeAddress()"> <br /> <br />
                        </div>

                         <div id="map-canvas">

                         </div>
                    }
}
            </fieldset>

        </div>
    </form>
</body>
</html>

